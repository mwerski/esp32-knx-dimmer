; Gemeinsame PlatformIO-Einstellungen
[platformio]
lib_dir = ../libraries
default_envs = esp32serial

[env]
build_flags =
  -DMASK_VERSION=0x57B0
  -DSMALL_GROUPOBJECT
  -Wno-unknown-pragmas


; ============================================================
; ESP32 – gemeinsame Basis (Partitionen + OTA Max Size zentral)
; ============================================================
[env:esp32_base]
platform = espressif32
framework = arduino
monitor_speed = 115200

; gilt für ALLE ESP32 Environments, die extends benutzen
board_build.partitions = partitions/app2.csv
board_upload.maximum_size = 2031616

build_flags =
  ${env.build_flags}


; ======================
; ESP32 – DevKit (normal)
; ======================
[env:esp32serial]
extends = env:esp32_base
board = esp32dev
;upload_port = COM3

[env:esp32ota]
extends = env:esp32_base
board = esp32dev
upload_protocol = espota
upload_port = 192.168.1.144


; ======================
; ESP32 Solo1 – seriell
; ======================
[env:esp32solo1serial]
extends = env:esp32_base
board = esp32dev

; Solo1-spezifische Platform + Framework (Tasmota-Forks)
platform = https://github.com/tasmota/platform-espressif32/releases/download/v2.0.2.3/platform-espressif32-2.0.2.3solo1.zip
platform_packages =
  framework-arduinoespressif32 @ https://github.com/tasmota/arduino-esp32/releases/download/1.0.7.5/tasmota-arduinoespressif32-solo1-release_v3.3.5.tar.gz

build_flags =
  ${env:esp32_base.build_flags}
  -DCONFIG_FREERTOS_UNICORE=1


; ======================
; ESP32 Solo1 – OTA
; ======================
[env:esp32solo1ota]
extends = env:esp32solo1serial
upload_protocol = espota
upload_port = 192.168.0.80    ; IP anpassen


; ======================
; ESP8266 – D1 mini lite
; ======================
;[env:esp8266serial]
;platform = espressif8266
;framework = arduino
;board = d1_mini_lite
;monitor_speed = 74880
;;upload_port = COM3

;[env:esp8266ota]
;platform = espressif8266
;framework = arduino
;board = d1_mini_lite
;monitor_speed = 74880
;upload_protocol = espota
;upload_port = 192.168.0.50


; ======================
; CBU (LibreTiny)
; ======================
;[env:cbu]
;platform = libretiny
;board = cbu
;framework = arduino
;monitor_speed = 115200
;build_flags =
;  ${env.build_flags}
;  -DKNX_NO_SPI
;  -DKNX_FLASH_OFFSET=0x1DB000 ; begin of beken userdata
;  -Dbk7231n="bk7231n"
